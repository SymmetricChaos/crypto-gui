// unknown    = !{ ANY }

kata = { "キャ" | "キュ" | "キョ" | "シャ" | "シュ" | "ショ" | "チャ" | "チュ" | "チョ" | "ニャ" | "ニュ" | "ニョ" | "ヒャ" | "ヒュ" | "ヒョ" | "ミャ" | "ミュ" | "ミョ" | "リャ" | "リュ" | "リョ" | "ギャ" | "ギュ" | "ギョ" | "ジャ" | "ジュ" | "ジョ" | "ヂャ" | "ヂュ" | "ヂョ" | "ビャ" | "ビュ" | "ビョ" | "ピャ" | "ピュ" | "ピョ" | "ア" | "イ" | "ウ" | "エ" | "オ" | "カ" | "キ" | "ク" | "ケ" | "コ" | "サ" | "シ" | "ス" | "セ" | "ソ" | "タ" | "チ" | "ツ" | "テ" | "ト" | "ナ" | "ニ" | "ヌ" | "ネ" | "ノ" | "ハ" | "ヒ" | "フ" | "ヘ" | "ホ" | "マ" | "ミ" | "ム" | "メ" | "モ" | "ヤ" | "ユ" |  "ヨ" | "ラ" | "リ" | "ル" | "レ" | "ロ" | "ワ" | "ヰ" |  "ヱ" | "ヲ" | "ン" | "ガ" | "ギ" | "グ" | "ゲ" | "ゴ" | "ザ" | "ジ" | "ズ" | "ゼ" | "ゾ" | "ダ" | "ヂ" | "ヅ" | "デ" | "ド" | "バ" | "ビ" | "ブ" | "ベ" | "ボ" | "パ" | "ピ" | "プ" | "ペ" | "ポ" | "、" | "。" | "ー" | "（" | "）" | "゛" | "゜" }
hira = { "きゃ" | "きゅ" | "きょ" | "しゃ" | "しゅ" | "しょ" | "ちゃ" | "ちゅ" | "ちょ" | "にゃ" | "にゅ" | "にょ" | "ひゃ" | "ひゅ" | "ひょ" | "みゃ" | "みゅ" | "みょ" | "りゃ" | "りゅ" | "りょ" | "ぎゃ" | "ぎゅ" | "ぎょ" | "じゃ" | "じゅ" | "じょ" | "ぢゃ" | "ぢゅ" | "ぢょ" | "びゃ" | "びゅ" | "びょ" | "ぴゃ" | "ぴゅ" | "ぴょ" | "あ" | "い" | "う" | "え" | "お" | "か" | "き" | "く" | "け" | "こ" | "さ" | "し" | "す" | "せ" | "そ" | "た" | "ち" | "つ" | "て" | "と" | "な" | "に" | "ぬ" | "ね" | "の" | "は" | "ひ" | "ふ" | "へ" | "ほ" | "ま" | "み" | "む" | "め" | "も" | "や" | "ゆ" |  "よ" | "ら" | "り" | "る" | "れ" | "ろ" | "わ" | "ゐ" |  "ゑ" | "を" | "ん" | "が" | "ぎ" | "ぐ" | "げ" | "ご" | "ざ" | "じ" | "ず" | "ぜ" | "ぞ" | "だ" | "ぢ" | "づ" | "で" | "ど" | "ば" | "び" | "ぶ" | "べ" | "ぼ" | "ぱ" | "ぴ" | "ぷ" | "ぺ" | "ぽ" | "、" | "。" | "ー" | "（" | "）" | "゛" | "゜" }
ascii = {  "--..- ..--. -..--" | "--..- ..--. .--" | "--..- ..--. --" | "--..- .. -..--" | "--.-. .. -..--" | "-.-.. .. -..--" | "..-. .. -..--" | "-.-.. .. .--" | "--..- .. .--" | "--.-. .. .--" | "..-. .. .--" | "--..- .. --" | "--..- ..--." | "--.-. .. --" | "-.-.. .. --" | "--..- -..--" | "..-.- -..--" | "-.-.. -..--" | "--.-. -..--" | "..-. -..--" | "..-. .. --" | "-... ..--." | "-.-. -..--" | "--.. ..--." | "-.. ..--." | "-.-.. .--" | "..-.- .--" | "--..- .--" | "--. -..--" | "--.-. .--" | "-.-.- .." | "-.-.. .." | "..-. .--" | "-.-.. --" | "--.-. .." | "..-.- --" | "--..- --" | "..-.. .." | "---.- .." | "--.-. --" | "--..- .." | "-.-. .--" | ".-.-- .." | ".---. .." | "..-. --" | "-.-. --" | "--. .--" | "---. .." | ". ..--." | ".--. .." | "-... .." | "--.. .." | ".-.. .." | "..-. .." | "---- .." | "-.-- .." | "...- .." | ".-..-." | "-.--.-" | ".-.-.." | "-.. .." | "--. --" | ".-.-.-" | "---.-" | "--.-." | ".-.--" | "..-.." | "--..-" | ".---." | "-.---" | "..-.-" | ".-..-" | "-.-.-" | ".-..." | ".--.." | ".-.-." | "..--." | ".--.-" | "-. .." | "-.--." | "-...-" | "-.-.." | "-..--" | "-..-." | ". .." | "..-." | ".--." | "-..-" | ".---" | "---." | "-.--" | "----" | "...-" | "..--" |"--.--" | ".-.." | "--.-" | "--.." | "...." | ".-.-" | "-..." | "-.-." | "..-" | "--." | ".--" | "---" | "-.-" | "..." | ".-." | "-.." | ".." | ".-" | "-." | "--" | "-" | "." }
//word = { "dah dah di di dah   di di dah dah dit   dah di di dah dah" | "dah dah di di dah   di di dah dah dit   di dah dah" | "dah dah di di dah   di di dah dah dit   dah dah" | "dah dah di di dah   di dit   dah di di dah dah" | "dah dah di dah dit   di dit   dah di di dah dah" | "dah di dah di dit   di dit   dah di di dah dah" | "di di dah dit   di dit   dah di di dah dah" | "dah di dah di dit   di dit   di dah dah" | "dah dah di di dah   di dit   di dah dah" | "dah dah di dah dit   di dit   di dah dah" | "di di dah dit   di dit   di dah dah" | "dah dah di di dah   di dit   dah dah" | "dah dah di di dah   di di dah dah dit" | "dah dah di dah dit   di dit   dah dah" | "dah di dah di dit   di dit   dah dah" | "dah dah di di dah   dah di di dah dah" | "di di dah di dah   dah di di dah dah" | "dah di dah di dit   dah di di dah dah" | "dah dah di dah dit   dah di di dah dah" | "di di dah dit   dah di di dah dah" | "di di dah dit   di dit   dah dah" | "dah di di dit   di di dah dah dit" | "dah di dah dit   dah di di dah dah" | "dah dah di dit   di di dah dah dit" | "dah di dit   di di dah dah dit" | "dah di dah di dit   di dah dah" | "di di dah di dah   di dah dah" | "dah dah di di dah   di dah dah" | "dah dah dit   dah di di dah dah" | "dah dah di dah dit   di dah dah" | "dah di dah di dah   di dit" | "dah di dah di dit   di dit" | "di di dah dit   di dah dah" | "dah di dah di dit   dah dah" | "dah dah di dah dit   di dit" | "di di dah di dah   dah dah" | "dah dah di di dah   dah dah" | "di di dah di dit   di dit" | "dah dah dah di dah   di dit" | "dah dah di dah dit   dah dah" | "dah dah di di dah   di dit" | "dah di dah dit   di dah dah" | "di dah di dah dah   di dit" | "di dah dah dah dit   di dit" | "di di dah dit   dah dah" | "dah di dah dit   dah dah" | "dah dah dit   di dah dah" | "dah dah dah dit   di dit" | "dit   di di dah dah dit" | "di dah dah dit   di dit" | "dah di di dit   di dit" | "dah dah di dit   di dit" | "di dah di dit   di dit" | "di di dah dit   di dit" | "dah dah dah dah   di dit" | "dah di dah dah   di dit" | "di di di dah   di dit" | "di dah di di dah dit" | "dah di dah dah di dah" | "di dah di dah di dit" | "dah di dit   di dit" | "dah dah dit   dah dah" | "di dah di dah di dah" | "dah dah dah di dah" | "dah dah di dah dit" | "di dah di dah dah" | "di di dah di dit" | "dah dah di di dah" | "di dah dah dah dit" | "dah di dah dah dah" | "di di dah di dah" | "di dah di di dah" | "dah di dah di dah" | "di dah di di dit" | "di dah dah di dit" | "di dah di dah dit" | "di di dah dah dit" | "di dah dah di dah" | "dah dit   di dit" | "dah di dah dah dit" | "dah di di di dah" | "dah di dah di dit" | "dah di di dah dah" | "dah di di dah dit" | "dit   di dit" | "di di dah dit" | "di dah dah dit" | "dah di di dah" | "di dah dah dah" | "dah dah dah dit" | "dah di dah dah" | "dah dah dah dah" | "di di di dah" | "di di dah dah" | "dah dah di dah dah" | "di dah di dit" | "dah dah di dah" | "dah dah di dit" | "di di di dit" | "di dah di dah" | "dah di di dit" | "dah di dah dit" | "di di dah" | "dah dah dit" | "di dah dah" | "dah dah dah" | "dah di dah" | "di di dit" | "di dah dit" | "dah di dit" | "di dit" | "di dah" | "dah dit" | "dah dah" | "dah" | "dit" }
//halfblock = { "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄   ▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄   ▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄   ▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄   ▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄   ▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄   ▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄   ▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄   ▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄  ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄ ▄▄▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄   ▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄ ▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄ ▄▄▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄   ▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄▄▄   ▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄   ▄ ▄" | "▄ ▄ ▄▄▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄   ▄ ▄" | "▄ ▄ ▄▄▄ ▄ ▄▄▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄ ▄   ▄ ▄" | "▄▄▄ ▄▄▄ ▄▄▄ ▄ ▄▄▄   ▄ ▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄   ▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄ ▄▄▄ ▄ ▄▄▄ ▄▄▄   ▄ ▄" | "▄ ▄▄▄ ▄▄▄ ▄▄▄ ▄   ▄ ▄" | "▄ ▄ ▄▄▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄   ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄   ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄▄▄ ▄   ▄ ▄" | "▄   ▄ ▄ ▄▄▄ ▄▄▄ ▄" | "▄ ▄▄▄ ▄▄▄ ▄   ▄ ▄" | "▄▄▄ ▄ ▄ ▄   ▄ ▄" | "▄▄▄ ▄▄▄ ▄ ▄   ▄ ▄" | "▄ ▄▄▄ ▄ ▄   ▄ ▄" | "▄ ▄ ▄▄▄ ▄   ▄ ▄" | "▄▄▄ ▄▄▄ ▄▄▄ ▄▄▄   ▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄▄▄   ▄ ▄" | "▄ ▄ ▄ ▄▄▄   ▄ ▄" | "▄ ▄▄▄ ▄ ▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄▄▄ ▄ ▄▄▄" | "▄ ▄▄▄ ▄ ▄▄▄ ▄ ▄" | "▄▄▄ ▄ ▄   ▄ ▄" | "▄▄▄ ▄▄▄ ▄   ▄▄▄ ▄▄▄" | "▄ ▄▄▄ ▄ ▄▄▄ ▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄▄▄ ▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄" | "▄ ▄▄▄ ▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄ ▄" | "▄▄▄ ▄▄▄ ▄ ▄ ▄▄▄" | "▄ ▄▄▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄ ▄▄▄" | "▄ ▄▄▄ ▄ ▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄▄▄" | "▄ ▄▄▄ ▄ ▄ ▄" | "▄ ▄▄▄ ▄▄▄ ▄ ▄" | "▄ ▄▄▄ ▄ ▄▄▄ ▄" | "▄ ▄ ▄▄▄ ▄▄▄ ▄" | "▄ ▄▄▄ ▄▄▄ ▄ ▄▄▄" | "▄▄▄ ▄   ▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄ ▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄ ▄ ▄" | "▄▄▄ ▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄ ▄▄▄ ▄" | "▄   ▄ ▄" | "▄ ▄ ▄▄▄ ▄" | "▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄ ▄▄▄" | "▄ ▄▄▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄▄▄ ▄▄▄" | "▄ ▄ ▄ ▄▄▄" | "▄ ▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄ ▄▄▄" | "▄ ▄▄▄ ▄ ▄" | "▄▄▄ ▄▄▄ ▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄ ▄" | "▄ ▄ ▄ ▄" | "▄ ▄▄▄ ▄ ▄▄▄" | "▄▄▄ ▄ ▄ ▄" | "▄▄▄ ▄ ▄▄▄ ▄" | "▄ ▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄" | "▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄▄▄ ▄▄▄" | "▄▄▄ ▄ ▄▄▄" | "▄ ▄ ▄" | "▄ ▄▄▄ ▄" | "▄▄▄ ▄ ▄" | "▄ ▄" | "▄ ▄▄▄" | "▄▄▄ ▄" | "▄▄▄ ▄▄▄" | "▄▄▄" | "▄" }
space = { " " }


ascii_basic_kana = {  ".-.-." | "-.-.-" | "-...-" | "-..-." | "-..--" | "---.-" | "..-.-" | "..-.." | ".-.--" | "--..-" | ".---." | "--.-." | ".--.." | ".-..-" | "-.-.." | "-.--." | "-.---" | ".-..." | ".--." | "..-." | "---." | "----" | "-.--" | "-.-." | "...-" | ".-.." | "--.-" | "-..-" | ".---" | "...." | ".-.-" | ".-.-."| "--.." | "..--" | "-..." |"--.--" | "---" | "--." | "-.-" | ".-." | "..." | "..-" | "-.." | ".--" | ".-" | "--" | "-." | "." | "-"  }

// An unaccented kana may be followed by:
//   a space then either the dakuten or handakuten\
//   a space and then a y-kana
//   or both in that order
// Invalid combinations will be handled elsewhere
ascii_kana = @{ ascii_basic_kana ~ ( " " ~ (".." | "..--."))? ~ (" " ~ (".--" | "-..--" | "--"))?}


kana_passage = { (kata | hira | space )+ }
ascii_passage = { (ascii_kana | space )+ }
//word_passage = { (word | space )+ }
//halfblock_passage = { (halfblock | space )+ }